{"version":3,"sources":["src/index.js"],"names":["Comment","message","id","parent","likes","msg","prototype","increment","decrement","getLikes","getId","setParent","parentId","newMessage","replyMessage","chatWidget","msgMap","addNewMessage","userId","reply","id1","id2","messageId","handleLike","isIncrement","del","messagid","message1","messag2","handleReply","messageRepliedId","newId","push","renderMessage","domEle","JSX","Object","entries","currentMessage","app","document","getElementById","addEventListener","event","target","datset","includes","Number","messageBox","innerHTML","add","chatBox","addBtn","errorBox","value","length"],"mappings":"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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["function Comment(message) {\n  this.id = 'randomeid';\n  this.parent = null;\n  this.likes = 0;\n  const msg = [];\n  this.message = message;\n\n}\n\nComment.prototype.increment = () => {\n  this.likes++;\n};\n\nComment.prototype.decrement = function() {\n  this.likes--;\n};\n\nComment.prototype.getLikes = function() {\n  return this.likes;\n};\n\nComment.prototype.getId = function() {\n  return this.id;\n};\n\nComment.prototype.setParent = function (parentId) {\n  this.parent = parentId;\n};\n\n\n\n\nconst newMessage = new Comment('hello');\n// user likes\nnewMessage.increment();\n//dislike\nnewMessage.decrement();\n// to print \nnewMessage.getLikes();\n\n\n// reply to message\nconst replyMessage = new Comment('hello reply');\n\nnewMessage.setParent(replyMessage.getId());\n\n// newMessage\n// {\n//   id: 'some',\n//   parent: null,\n//   message: 'hello'\n// }\n\n// replyMessage\n// {\n//   id: 'ssome',\n//   message: 'hello reply',\n//   parent: 'some'\n// }\n\nconst chatWidget = (function() {\n  const msgMap = {};\n  let id = 0;\n  function addNewMessage(userId, message) {\n    msgMap[id++] = {\n      message,\n      userId,\n      reply: [id1, id2],\n      likes: 0\n    };\n    return messageId;\n  }\n\n  function handleLike(messageId, isIncrement) {\n      if (msgMap[messageId]) {\n        msgMap[messageId] = isIncrement ?\n        msgMap[messageId]++ : msgMap[messageId]--;\n      }\n  }\n\n  function del(messagid) {\n    [message1, messag2]\n  }\n\n  function handleReply(messageRepliedId, userId, message) {\n    const newId = addNewMessage(userId, message);\n    msgMap[messageRepliedId].reply.push([userId, newId])\n  }\n\n  function renderMessage(domEle) {\n    let JSX = '<div class=\"message-wrapper\">';\n    \n    for (const [messageId, currentMessage] of Object.entries(msgMap)) {\n      JSX += `\n        <div>\n          <div>${messageId}</div>\n          <div>${currentMessage.message}</div>\n          <div id=\"actionHandler\">\n            <span>${currentMessage.likes}</span>\n            <button id=\"${messageId}_like\" data-id=\"${messageId}}\">\n              like\n            </button>\n            <button id=\"${messageId}_dislike>\n              dislike\n            </button>\n            <button id=\"${messageId}_reply\">\n              reply\n            </button>\n          </div>\n        </div>\n      `;\n    }\n\n    JSX += \"</div>\";\n\n    const app = document.getElementById('app');\n    if (app) {\n      app.addEventListener('click', function(event) {\n        const target = event.target;\n        const id = target.id;\n        const messageId = target.datset.id;\n        if (id.includes('like')) {\n          handleLike(Number(messageId), true);\n        } else if (id.includes('dislike')) {\n          handleLike(Number(messageId), false);\n        } else if (id.includes('reply')) {\n          handleReply();\n        }\n        renderMessage(messageBox);\n      });\n    }\n  \n    domEle.innerHTML = JSX;\n  }\n\n  return {\n    add: addNewMessage,\n    renderMessage,\n  };\n})();\n\nconst app = document.getElementById('app');\nconst chatBox = document.getElementById('chat');\nconst addBtn = document.getElementById('addBtn');\nconst errorBox = document.getElementById('error');\nconst messageBox = document.getElementById('messages');\n\n\naddBtn.addEventListener('click', function(event) {\n  const value = chatBox.value  || '';\n  if (value.length > 10) {\n    errorBox.innerHTML = `Message should less than 200 characters`;\n  } else {\n    chatWidget.add('random_1', value);\n    chatWidget.renderMessage(messageBox);\n    chatBox.value = '';\n  }\n});"]}